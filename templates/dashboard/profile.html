<!-- ==================== PROFILE TEMPLATE ==================== -->
<!-- File: dashboard/profile.html -->
{% extends 'base.html' %}
{% load static %}

{% block title %}Profile Settings{% endblock %}

{% block content %}
<div class="page-title accent-background">
  <div class="container">
    <h1>Profile Settings</h1>
    <p class="lead">Manage your account information</p>
    <nav class="breadcrumbs">
      <ol>
        <li><a href="{% url 'home' %}">Home</a></li>
        <li><a href="{% url 'dashboard_home' %}">Dashboard</a></li>
        <li class="current">Profile</li>
      </ol>
    </nav>
  </div>
</div>

<section class="section">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        {% if profile_type == 'vendor' %}
        <!-- Vendor Profile -->
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-person"></i> Account Information</h5>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <strong>Username:</strong><br>
                {{ user.username }}
              </div>
              <div class="col-md-6">
                <strong>Email:</strong><br>
                {{ user.email }}
              </div>
              <div class="col-md-6">
                <strong>Full Name:</strong><br>
                {{ user.get_full_name|default:"Not set" }}
              </div>
              <div class="col-md-6">
                <strong>Date Joined:</strong><br>
                {{ user.date_joined|date:"M d, Y" }}
              </div>
            </div>
            <div class="mt-3">
              <a href="#" class="btn btn-outline-primary">
                <i class="bi bi-pencil"></i> Edit Account
              </a>
            </div>
          </div>
        </div>

        <div class="card mb-4">
          <div class="card-header bg-success text-white">
            <h5 class="mb-0"><i class="bi bi-briefcase"></i> Company Information</h5>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-12">
                <strong>Company Name:</strong><br>
                {{ profile.company_name }}
              </div>
              <div class="col-md-6">
                <strong>Business Type:</strong><br>
                {{ profile.get_business_type_display }}
              </div>
              <div class="col-md-6">
                <strong>Registration Number:</strong><br>
                {{ profile.registration_number }}
              </div>
              <div class="col-md-6">
                <strong>Tax ID:</strong><br>
                {{ profile.tax_id }}
              </div>
              <div class="col-md-6">
                <strong>Year Established:</strong><br>
                {{ profile.year_established }}
              </div>
              <div class="col-md-6">
                <strong>Employees:</strong><br>
                {{ profile.number_of_employees }}
              </div>
              <div class="col-md-6">
                <strong>Annual Turnover:</strong><br>
                {{ profile.annual_turnover|floatformat:2 }}
              </div>
              <div class="col-md-6">
                <strong>Email:</strong><br>
                {{ profile.email }}
              </div>
              <div class="col-md-6">
                <strong>Phone:</strong><br>
                {{ profile.phone }}
              </div>
              <div class="col-12">
                <strong>Address:</strong><br>
                {{ profile.address }}<br>
                {{ profile.city }}, {{ profile.country }} {{ profile.postal_code }}
              </div>
              <div class="col-12">
                <strong>Verification Status:</strong><br>
                {% if profile.is_verified %}
                <span class="badge bg-success">Verified</span>
                {% else %}
                <span class="badge bg-warning">Pending Verification</span>
                {% endif %}
              </div>
              <div class="col-12">
                <strong>Rating:</strong><br>
                <i class="bi bi-star-fill text-warning"></i> {{ profile.rating }}/5.0 
                ({{ profile.total_reviews }} reviews)
              </div>
            </div>
            <div class="mt-3">
              <a href="#" class="btn btn-outline-success">
                <i class="bi bi-pencil"></i> Edit Company Profile
              </a>
            </div>
          </div>
        </div>
        {% else %}
        <!-- Regular User Profile -->
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">
            <h5 class="mb-0"><i class="bi bi-person"></i> Account Information</h5>
          </div>
          <div class="card-body">
            <div class="row g-3">
              <div class="col-md-6">
                <strong>Username:</strong><br>
                {{ user.username }}
              </div>
              <div class="col-md-6">
                <strong>Email:</strong><br>
                {{ user.email }}
              </div>
              <div class="col-md-6">
                <strong>Full Name:</strong><br>
                {{ user.get_full_name|default:"Not set" }}
              </div>
              <div class="col-md-6">
                <strong>Date Joined:</strong><br>
                {{ user.date_joined|date:"M d, Y" }}
              </div>
            </div>
            <div class="mt-3">
              <a href="#" class="btn btn-outline-primary">
                <i class="bi bi-pencil"></i> Edit Profile
              </a>
              <a href="#" class="btn btn-outline-secondary">
                <i class="bi bi-key"></i> Change Password
              </a>
            </div>
          </div>
        </div>
        {% endif %}

        <!-- Security Settings -->
        <div class="card">
          <div class="card-header bg-warning">
            <h5 class="mb-0"><i class="bi bi-shield-lock"></i> Security Settings</h5>
          </div>
          <div class="card-body">
            <div class="mb-3">
              <h6>Password</h6>
              <p class="text-muted">Last changed: Never</p>
              <a href="#" class="btn btn-outline-warning">
                <i class="bi bi-key"></i> Change Password
              </a>
            </div>
            <hr>
            <div>
              <h6>Two-Factor Authentication</h6>
              <p class="text-muted">Add an extra layer of security to your account</p>
              <a href="#" class="btn btn-outline-success">
                <i class="bi bi-shield-check"></i> Enable 2FA
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}